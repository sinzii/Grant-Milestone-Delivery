# Milestone Delivery :mailbox:

* **Application Document:** [Dedot & Typink](https://github.com/use-inkubator/Ecosystem-Grants/blob/master/applications/dedot_typink.md)
* **Milestones:** 2 & 3

---

## Milestone 2: Dedot - ink! v6 Integration

### Overview

- Implement full ink! v6 integration while maintaining backward compatibility with ink! v4/v5
- Generate TypeScript Types and APIs from both traditional Rust metadata and Solidity metadata format supported by ink! v6
- Enable auto-suggestions and IntelliSense for contract APIs based on generated types
- Ensure seamless interaction between ink! v6 contracts and pallet-revive
- Provide unified API to calculate contract addresses for easier contract deployment
- Implement automatic dry run and gas fee estimation for improved developer experience

### Deliverables

| Number | Deliverable | Link                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Notes |
| -----: | ----------- |-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| ------------- |
| **0a.** | License | [Apache 2.0](https://github.com/dedotdev/dedot/blob/main/LICENSE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | |
| **0b.** | Documentation | - [Documentation](https://docs.dedot.dev/smart-contracts)<br/> - Examples: [ink! v6 via ink! ABI](https://github.com/dedotdev/dedot/tree/main/examples/scripts/inkv6), [ink! v6 via Sol ABI](https://github.com/dedotdev/dedot/tree/main/examples/scripts/inkv6)                                                                                                                                                                                                                                                                                                                                                                                                                                                | - Make sure to use the latest [ink-node](https://github.com/use-ink/ink-node/releases) binary to test out the examples |
| **0c.** | Testing and Testing Guide | - We have both unit tests & E2E tests (via zombienet & ink-node)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | To run the tests, please follow the instructions below: <br/> - To run unit tests, simply clone the repo and run: `yarn install && yarn test` <br/> - To run e2e tests, please follow instructions in the repo: [ink-node](https://github.com/dedotdev/dedot/blob/main/e2e/contracts/README.md), [zombienet](https://github.com/dedotdev/dedot/blob/main/e2e/zombienet/README.md). <br/><br/> We're running [GH Actions](https://github.com/dedotdev/dedot/actions) for these tests on every changes/commits. |
| **0d.** | Article & Communication | - [Forum Post](https://forum.polkadot.network/t/dedot-typink-unified-smart-contract-support-for-ink-v6-solidity-and-beyond-through-ink-ubator-2-0/15220)<br/> - [X's thread](https://x.com/realsinzii/status/1975063049846301118)<br/> - [Telegram Announcement](https://t.me/inkathon/3932)                                                                                                                                                                                                                                                                                                                                                                                                                     |  |
| 1. | ink! v6 integration | - Type & APIs generation for [ink! ABI](https://github.com/dedotdev/dedot/tree/main/packages/codegen/src/typink) & [Solidity ABI](https://github.com/dedotdev/dedot/tree/main/packages/codegen/src/sol)<br />- Executor for contract interactions via [ink! ABI](https://github.com/dedotdev/dedot/tree/main/packages/contracts/src/executor/ink) and [Solidity ABI](https://github.com/dedotdev/dedot/tree/main/packages/contracts/src/executor/sol)<br />- Unified interface for contract interaction: [Contract](https://github.com/dedotdev/dedot/blob/main/packages/contracts/src/Contract.ts), [ContractDeployer](https://github.com/dedotdev/dedot/blob/main/packages/contracts/src/ContractDeployer.ts)<br />- [Unified API to calculate contract address](https://github.com/dedotdev/dedot/blob/1252671f59eeff8f17b2280a8b13925024191438/packages/contracts/src/types/index.ts#L34-L46) ([Implementation](https://github.com/dedotdev/dedot/blob/1252671f59eeff8f17b2280a8b13925024191438/packages/contracts/src/executor/ink/ConstructorTxExecutor.ts#L181-L212))<br />- [Auto dry run & estimate gas fee](https://github.com/dedotdev/dedot/blob/1252671f59eeff8f17b2280a8b13925024191438/packages/contracts/src/executor/ink/TxExecutor.ts#L52-L78) | |

---

## Milestone 3: Typink - ink! v6 Integration, Hooks & CLI Enhancements

### Overview

- Integrate Dedot's ink! v6 support into Typink while maintaining backward compatibility with ink! v4/v5
- Improve the txToaster system to support multiple notification libraries through an abstraction layer
- Enhanced the create-typink CLI with flexible package manager support, new templates for supported contract types, a fresh template design, and integrated Next.js with shadcn.
- Added new hooks for account mapping checks, direct storage interaction, multi-wallet/multi-network connections with light client support, and general dapp utilities (tx submission, fee estimation, block info)
- Comprehensively update documentation and provide tutorials for building dApps with ink! v6
- As discussed in our M1 delivery, EVM wallet support (MetaMask, SubWallet EVM, etc.) has been excluded from this grant. This functionality requires interaction with eth_* JSON-RPC APIs via a different proxy RPC server, which would necessitate significant architectural changes to Dedot's core. Transaction signing will continue to be supported through Polkadot wallets (SubWallet, Polkadot.js Signer, Talisman, etc.).

### Deliverables

| Number | Deliverable | Link                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Notes |
| -----: | ----------- |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| ------------- |
| **0a.** | License | [MIT](https://github.com/dedotdev/typink/blob/main/LICENSE)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | |
| **0b.** | Documentation | [Documentation](https://typink.dev)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | |
| **0c.** | Testing and Testing Guide | - We have both unit tests & E2E tests                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | To run the tests, please follow the instructions below: <br/> - To run unit tests, simply clone the repo and run: `yarn install && yarn test` <br/> - To run e2e tests, please follow instructions in the repo: [e2e/nodes](https://github.com/dedotdev/typink/tree/main/e2e/nodes). <br/><br/> We're running [GH Actions](https://github.com/dedotdev/typink/actions) for these tests on every changes/commits. |
| **0d.** | Article & Communication | - [Forum Post](https://forum.polkadot.network/t/dedot-typink-unified-smart-contract-support-for-ink-v6-solidity-and-beyond-through-ink-ubator-2-0/15220)<br/> - [X's thread](https://x.com/realsinzii/status/1975063049846301118)<br/> - [Telegram Announcement](https://t.me/inkathon/3932)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |  |
| 1. | Integration with Dedot's ink! v6 support | - Unified React [hooks interface](https://github.com/dedotdev/typink/tree/main/packages/typink/src/hooks) for interactions with all supported contract types (ink! v5, ink! v6 via ink! ABI and Sol ABI as well as Solidity)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | |
| 2. | Improved txToaster system | - [txToaster utility](https://github.com/dedotdev/typink/blob/main/packages/typink/src/tx-toaster/index.ts) moved to typink package<br />- [Adapter interface](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/typink/src/tx-toaster/types.ts#L17-L21) to support any toaster/notification libraries<br />- Built-in support for [sonner](https://github.com/dedotdev/typink/blob/main/packages/typink/src/tx-toaster/adapters/sonner.ts), [react-toastify](https://github.com/dedotdev/typink/blob/main/packages/typink/src/tx-toaster/adapters/react-toastify.ts), [react-hot-toast](https://github.com/dedotdev/typink/blob/main/packages/typink/src/tx-toaster/adapters/react-hot-toast.ts)<br />- [Documentation](https://docs.dedot.dev/typink/utilities/txtoaster) for setup and usage                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | |
| 3. | `create-typink` CLI & template project improvements | - [Support multiple package managers](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/create-typink/src/index.ts#L24) (yarn, pnpm, npm, bun)<br />- [Support multiple contract types](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/create-typink/src/types.ts#L35-L56) (ink! v6 via ink ABI, ink! v6 via Sol ABI, Solidity, ink! v5)<br />- [Adjust networks based on contract types](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/create-typink/src/types.ts#L58-L108)<br />- New [templates](https://github.com/dedotdev/typink/tree/main/packages/create-typink/templates) for all contract types, comes with a fresh redesign, Next.js + shadcn, prebuilt components and examples                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | |
| 4. | New hooks & feature improvements | - New hooks: [useCheckMappedAccount](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useCheckMappedAccount.ts) for checking if an account is mapped, [useRootStorage](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useRootStorage.ts) & [useLazyStorage](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useLazyStorage.ts) to interact with ink! v6 storage directly<br />- [Connect to multiple wallets](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/typink/src/providers/WalletSetupProvider.tsx#L91-L92) at the same time<br />- [Connect to multiple networks](https://github.com/dedotdev/typink/blob/3d98db14b002c866be9f91955e7c9359f590bff5/packages/typink/src/providers/ClientProvider.tsx#L40-L46) at the same time, light client supported<br />- More hooks for general dapp purpose: [useTx](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useTx.ts), [useTxFee](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useTxFee.ts), [useBlockInfo](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/useBlockInfo.ts), [usePolkadotClient](https://github.com/dedotdev/typink/blob/main/packages/typink/src/hooks/usePolkadotClient.ts) | We removed the EVM wallet support deliverable from the original proposal (as documented in M1 & Key Changes section) and added new improvements & features for Typink. |
| 5. | Documentation and tutorials | - [Documentation](https://typink.dev) updated with all new features<br />- [Tutorial: Build an ERC20 dApp with Typink and ink! v6](https://docs.dedot.dev/typink/help-and-faq/tutorials/build-an-erc20-dapp-with-typink-and-ink-v6)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | |
